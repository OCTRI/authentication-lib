<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org">
	<head>
		<title>Reset Password</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="ctx" th:content="@{/}"/>
		<link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" />
		<link rel="stylesheet" type="text/css" th:href="@{/webjars/jquery-ui/jquery-ui.min.css}" />
		<link rel="stylesheet" type="text/css" th:href="@{/webjars/jquery-ui/jquery-ui.theme.min.css}" />
		<link rel="stylesheet" type="text/css" th:href="@{/css/default.css}" />
	</head>
	<body>
		<nav th:replace="fragments/navbar :: navbar" />
		<div class="container-fluid" th:fragment="resetPassword">
		 	<div class="col-xs-12 col-sm-6 col-md-4 col-sm-offset-3 col-md-offset-4">
				<h3>Reset Password</h3>
				<form class="form" th:action="@{/user/password/reset}" method="POST">
					<div th:if="${error} == true">
						<div class="alert alert-danger">
							There was an unexpected error while resetting your password. 
							If this persists you may <a th:href="@{/user/password/forgot}">send another request</a>.
						</div>
					</div>
					<div th:if="${invalidToken} == true">
						<div class="alert alert-danger">
							Could not validate the provided token. Please check your email and try again.
						</div>
					</div>
					<div th:if="${invalidToken} != true">
						<div th:if="${invalidPassword} == true">
							<div class="alert alert-danger">
								Please check your password and try again.
							</div>
						</div>

						<div class="form-group">
							<label th:text="'New Password'" for="newPassword">...</label>
							<!--/* TODO: We could use something like http://plugins.jquery.com/pwstrength-bootstrap/ to validate the password inline with JavaScript. */-->
							<span th:replace="fragments/user/password/requirements :: passwordInfo"></span>
							<input id="newPassword" name="newPassword" class="form-control" type="password"/>
						</div>
		
						<div class="form-group">
							<label th:text="'Confirm New Password'" for="confirmPassword">...</label>
							<input id="confirmPassword" name="confirmPassword" class="form-control" type="password" />
						</div>
						
						<div class="form-group">
							<input id="token" name="token" type="hidden" th:value="${token}" />
							<button class="btn btn-primary" type="submit">Submit</button>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div th:replace="fragments/assets :: javascript" />
        <script type="text/javascript">
        		$(function() {
        			$('#newPassword').focus();
        		});
        </script>
	</body>
</html>