<div class="container-fluid user-form">
	<div class="row">
		<div class="col-lg-12 col-md-12 col-sm-12">
			<h3>{{pageTitle}}</h3>
			
			{{! These errors are parsed by default.js }}
			{{#errors}}
				<input type="hidden" data-error="true" data-field="{{field}}" data-message="{{defaultMessage}}" />
			{{/errors}}
			
			{{>fragments/forms/user/user_save_error}}

			<div class="text-muted">
				<p>* denotes a required field</p>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-lg-12 col-md-12 col-sm-12">
			<form role="form" class="form" method="post" action="{{req.contextPath}}/admin/user/form">
				<div class="row">
					<div class="col-lg-3 col-md-3 col-sm-12">
						<h4>User Details</h4>

						{{#newUser}}
						<div class="form-group">
							<label>Username*</label>
							<input id="username" class="form-control lookup-user" autocomplete="off" type="text" id="username" name="username" value="{{#user.username}}{{.}}{{/user.username}}" />
						</div>
						{{/newUser}}
						
						{{^newUser}}
						<div class="form-group">
							<label>Username*</label>
							<input class="form-control" value="{{user.username}}" type="text" disabled="disabled" />
							<input type="hidden" id="username" name="username" value="{{user.username}}" />
							<input class="form-control" type="hidden" id="id" name="id" value="{{user.id}}" />
						</div>
						{{/newUser}}

						{{#ldapEnabled}}
							{{#tableBasedEnabled}}
								<div class="form-group">
									<input type="checkbox" id="ldapUser" name="ldapUser" {{#user.ldapUser}}checked="checked"{{/user.ldapUser}} />
									<span>OHSU User</span>
								</div>
								<div class="form-group">
									<button id="ldapLookup" class="btn btn-primary">LDAP Lookup</button>
								</div>
							{{/tableBasedEnabled}}
						{{/ldapEnabled}}

						<div class="form-group">
							<label>First Name*</label>
							<input id="firstName" class="form-control" type="text" id="firstName" name="firstName" value="{{#user.firstName}}{{.}}{{/user.firstName}}" />
						</div>

						<div class="form-group">
							<label>Last Name*</label>
							<input id="lastName" class="form-control" type="text" id="lastName" name="lastName" value="{{#user.lastName}}{{.}}{{/user.lastName}}" />
						</div>

						<div class="form-group">
							<label>Institution*</label>
							<input id="institution" class="form-control" type="text" id="institution" name="institution" value="{{#user.institution}}{{.}}{{/user.institution}}" />
						</div>

						<div class="form-group">
							<label>Email*</label>
							<input id="email" class="form-control" type="text" id="email" name="email" value="{{#user.email}}{{.}}{{/user.email}}" />
						</div>

						<h4>User Roles</h4>

						<div class="form-group">
							{{#userRoles}}
							<p>
								<label><input {{#selected}}checked='checked'{{/selected}} type="checkbox" id="userRoles" name="userRoles" value="{{id}}" />
								{{label}}</label>
							</p>
							{{/userRoles}}
						</div>
					</div>

					<div class="col-lg-1 col-md-1">
					</div>

					<div class="col-lg-3 col-md-3 col-sm-12">
						<h4>Account Status</h4>

						<div class="form-group">
							<label>Enabled*</label>
							<select class="form-control" id="enabled" name="enabled">
								<option value="true" {{#user.enabled}}selected="selected"{{/user.enabled}}>Yes</option>
								<option value="false" {{^user.enabled}}selected="selected"{{/user.enabled}}>No</option>
							</select>
						</div>

						<div class="form-group">
							<label>Account Locked*</label>
							<select class="form-control" id="accountLocked" name="accountLocked">
								<option value="true" {{#user.accountLocked}}selected="selected"{{/user.accountLocked}}>Yes</option>
								<option value="false" {{^user.accountLocked}}selected="selected"{{/user.accountLocked}}>No</option>
							</select>
						</div>

						<div class="form-group">
							<label>Account Expired*</label>
							<select class="form-control" id="accountExpired" name="accountExpired">
								<option value="true" {{#user.accountExpired}}selected="selected"{{/user.accountExpired}}>Yes</option>
								<option value="false" {{^user.accountExpired}}selected="selected"{{/user.accountExpired}}>No</option>
							</select>
						</div>

						<div class="form-group">
							<label>Credentials Expired*</label>
							<select class="form-control" id="credentialsExpired" name="credentialsExpired">
								<option value="true" {{#user.credentialsExpired}}selected="selected"{{/user.credentialsExpired}}>Yes</option>
								<option value="false" {{^user.credentialsExpired}}selected="selected"{{/user.credentialsExpired}}>No</option>
							</select>
						</div>

						<div class="form-group">
							<label>Account Expiration Date</label>
							<input class="form-control" type="text" placeholder="e.g. 1/3/18" id="accountExpirationDate" name="accountExpirationDate" value="{{#user.accountExpirationDateView}}{{.}}{{/user.accountExpirationDateView}}" />
						</div>

						<div class="form-group">
							<label>Credentials Expiration Date</label>
							<input class="form-control" type="text" placeholder="e.g. 1/3/18" id="credentialsExpirationDate" name="credentialsExpirationDate" value="{{#user.credentialsExpirationDateView}}{{.}}{{/user.credentialsExpirationDateView}}" />
						</div>

						<div class="form-group">
							<label>Consecutive Login Failures*</label>
							<input class="form-control" type="text" readonly="readonly" id="consecutiveLoginFailures" name="consecutiveLoginFailures" value="{{#user.consecutiveLoginFailures}}{{.}}{{/user.consecutiveLoginFailures}}" />
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="form-controls">
							{{>fragments/forms/csrf_input}}
							<button name="save" type="submit" class="btn btn-primary" value="save">Save</button>
							<a class="btn btn-link cancel">Cancel</a>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>